<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>User and Role Management</title>
  <style>
 
  </style>
</head>
<body>
  <div id="sidebar">
<%-include('menu.ejs')%>

  </div>
  <div id="content">
    <h2>User List</h2>
    <ul>
      <% users.forEach((user) => { %>
        <li>
          <%= user.username %>
          <form action="/users/<%= user.id %>/edit" method="POST" style="display: inline;">
            <input type="text" name="username" value="<%= user.username %>" required>
            <select name="roleId" required>
              <% roles.forEach((role) => { %>
                <option value="<%= role.grdtlid %>" <%= role.grdtlid === users.role ? 'selected' : '' %>><%= role.grdtlname %></option>
              <% }); %>
            </select>
            <button type="submit">Edit</button>
          </form>
          <form action="/users/<%= user.id %>/delete" method="POST" style="display: inline;">
            <button type="submit">Delete</button>
          </form>
        </li>
      <% }); %>
    </ul>
    
    <h2>Add User</h2>
    <form action="/users" method="POST">
      <input type="text" name="username" placeholder="Username" required>
      <select name="role" required>
        <% roles.forEach((role) => { %>
          <option value="<%= role.grdtlid %>"><%= role.grdtlname %></option>
        <% }); %>
      </select>
      <button type="submit">Add User</button>
    </form>
  </div>
</body>
</html>
